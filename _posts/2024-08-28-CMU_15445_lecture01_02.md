---
title: "CMU-15445 Leture 1&2"
date: 2024-08-28 09:54:00 +0800
categories: [Tech, CMU-15/445]
tags: [database, distributed, cmu 15-445]
description: 数据库主要架构，以及关系模型和关系代数
author: Payne
math: true
mermaid: true
---

15-445/645笔记。也参考[李国良](https://dbgroup.cs.tsinghua.edu.cn/ligl/index_cn.html)老师的《数据库管理系统》。

## 课程资料和背景

### Leture 0: 关系模型和关系代数

- [视频链接](https://www.youtube.com/watch?v=XGMoq-D_mao&list=PLSE8ODhjZXjbj8BMuIrRcacnQh20hmY9g&index=2)；
- [课件](https://15445.courses.cs.cmu.edu/fall2023/slides/01-relationalmodel.pdf);
- [**课堂记录**](https://15445.courses.cs.cmu.edu/fall2023/notes/01-relationalmodel.pdf)，这堂课每次都会要求有人做课堂记录。

要求阅读《数据库系统概念》第1-2，[27(在线章节)](https://db-book.com/online-chapters-dir/27.pdf)章. 课后实验为Project0.

### Leture 1：SQL

- [视频链接](https://www.youtube.com/watch?v=n9S4Ibh5O0E&list=PLSE8ODhjZXjbj8BMuIrRcacnQh20hmY9g&index=3)；
- [课件](https://15445.courses.cs.cmu.edu/fall2023/slides/02-modernsql.pdf);
- [**课堂记录**](https://15445.courses.cs.cmu.edu/fall2023/notes/02-modernsql.pdf)，这堂课每次都会要求有人做课堂记录。

要求阅读《数据库系统概念》第3-5章. 

## 数据库/数据库管理系统背景和框架

可以参考以前写的文章: [数据库概览](https://www.yuque.com/payne-pbjor/uhyp15/goyr56bpb1h07v5i?singleDoc#)。

数据库（Database）和数据库管理系统（Database Management System，DBMS）这两个概念经常被混淆。数据库管理系统是管理数据库的软件。

### 普通文件实现的数据库

讨论了一种用逗号分隔符分割值的文件（comma-separated value，CSV）来保存数据库的情况，每次读写都需要把文件整个读到内存里。
需要考虑这样的数据库管理系统：
- 效率；
- 灵活性；
- 数据完整性；
- 持久性；
- 并发；
- 抽象，该实现下每个表和逻辑存储强耦合。

### 数据库管理系统

数据库管理系统是存储和分析数据库中数据的应用。通用的DBMS被设计为允许根据某些数据模型来定义、创建、查询、更新和管理数据库。

数据模型（data model）是用于描述数据库中的数据的概念的集合，比如：
- 关系型（relational），也是最常见的；
- NoSQL，包括key/value，文档模型（document），图模型（graph）；
- 数组/矩阵/向量（array/matrix/vectors），主要用于机器学习。

模式（schema）是对基于数据模型的特定数据集合的描述。

早期的数据库管理系统和逻辑层和物理层耦合度很高，以至于更换硬件之后需要重写编写代码。

## 关系模型和关系代数

参考以前写的文章: [关系模型](https://www.yuque.com/payne-pbjor/uhyp15/qmqbo8g86cg4s8t6?singleDoc#)。

理解数据之间的关系模型之后可以了解怎么设计数据库，可以参考[文章](https://www.yuque.com/payne-pbjor/uhyp15/brzu9lp09khcsl53?singleDoc#)。

这里面包括以前面试八股里面很喜欢问的，在设计关系数据库的数据表时需要考虑四个范式(用来减少依赖和数据冗余)。

### 关系模型

在早期的数据库管理系统基础上，诞生了关系模型。关系模型抽象了数据库中的概念，用以避免额外的维护开销。

关系模型定义了三个概念：
- 结构（Structure）：关系的定义及其内容，即关系所具有的属性和这些属性可以持有的值。
- 完整性（Integrity）；
- 操作（Manipulation）。


- 关系（relation）是一个无序的集，它包含表示实体的属性之间的关系；
- 元组（tuple）是一组属性值（也成为域，domain）；
- 有n个属性的关系称为n元关系，n元关系等同于一个包含n列的表。

- 主键（Primary key）：用于唯一标识数据库表中每一行记录的一个或多个字段。每个表只能有一个主键，且主键的值必须是唯一的，不能包含空值（NULL）。 
- 外键（Foreign Key）：一个或多个字段，这些字段在一个表中引用另一个表的主键；
- 约束（Constraints）：限制和规范数据表中数据的规则和条件。

### Data Manipulation Languages（DML）

在数据库中存储和检索数据的方法，分为两类：

- 过程式（Procedural）：要求用户明确指定数据库管理系统（DBMS）应该使用的策略和步骤，以找到所需的结果。换句话说，用户不仅要告诉系统他们想要什么数据，还要告诉系统如何获取这些数据。
- 非过程式（声明式，Non-Procedural）：这种类型的查询语言只要求用户指定他们想要的数据，而不需要指定如何找到这些数据。用户只需描述所需数据的条件，DBMS 会自动决定最优的执行策略。例如，使用 SQL 语句 SELECT COUNT(*) FROM artist 来计算表中有多少记录。用户只需关心查询的结果，而不需要关心查询的执行过程。

### 关系代数

#### 选择（Select）

选择操作用于从关系中选择满足特定条件的元组。

$$ \sigma_{\text{condition}}(R) $$

#### 投影（Projection）

投影操作用于从关系中选择特定的属性列。

$$ \pi_{\text{attribute1, attribute2, ...}}(R) $$

#### 并（Union）

并操作用于合并两个关系中的所有元组。

$$ R \cup S $$

#### 交（Intersection）

交操作用于获取两个关系中共同存在的元组。

$$ R \cap S $$

#### 差（Difference）

差操作用于获取在一个关系中存在但不在另一个关系中存在的元组。

$$ R - S $$

#### 积（Product）

积操作用于生成两个关系的所有可能的元组组合。

$$ R \times S $$

#### 连接（Join）

连接操作用于合并两个关系中的元组，满足特定的连接条件。

$$ R \bowtie_{\text{condition}} S $$

### 数据模型

- 文档模型（Document Model）：文档模型是一种以文档为单位存储和管理数据的模型。在这种模型中，数据被组织成一系列记录文档，每个文档包含一个命名字段/值对的层次结构；
- 向量模型（Vector Model）: 向量模型使用一维数组来表示数据，主要用于最近邻搜索（无论是精确的还是近似的）。

## SQL

参考以前写的文章：[SQL](https://www.yuque.com/payne-pbjor/uhyp15/kdtwbyioqw190gz4?singleDoc#)

有空再从这文章复制粘贴一下.

#### SQL历史

#### 连接

#### 聚集

#### 嵌套查询

## 写在后面

链接分享失效欢迎评论/提issue/发邮件提醒。

说实话，我觉得关系模型-关系代数-SQL这部分有点掉书袋了。实际数据库的用法/SQL语言似乎也没必要完全记住，除非本身每天就是在做直接写SQL的工作。如果是面向业务的工作，只需要将主要的SQL封装起来就可以了；如果是数据库内核的工作，一般来说每个功能模块也只跟一部分SQL语言有关...而且数据库当下类型也很多，包括关系型/非关系型，向量数据库等，每种数据库查询姿势也不尽相同。

就像C++一样，几乎从来也没有人精通过...总之，尽量窥其全貌，但是精细的研究每个工具确实没什么必要。
