---
title: io_uring
date: 2024-10-16 18:00:00 +0800
categories: [Tech, Linux]
tags: [server, linux, c++]
description: io_uring的原理和使用场景
author: Payne
mermaid: true
---

`io_uring` 是 2019 年 5 月发布的 Linux 5.1 加入的一个重大特性 —— Linux 下的全新的异步 I/O 支持，希望能彻底解决长期以来 Linux AIO 的各种不足。

## 原理介绍和分析

`io_uring`基于两个无锁环形缓冲区构建，即提交队列和完成队列，这些缓冲区在用户空间和内核空间之间共享。用户将新的提交队列条目（SQE），如接收（recv）和发送操作，插入到提交队列中。插入到队列中不需要任何系统调用。为了通知内核提交队列中的新条目，io_uring_enter系统调用在内核端以非阻塞方式处理这些条目，直到请求被传输到网络或存储设备。该设备使用中断请求（IRQ）通知内核操作已完成。请求在中断期间被处理，并放置在完成队列中。为了检查请求是否成功，用户定期查看可用的完成队列条目（CQE）。研究发现，io_uring在存储应用程序中非常高效，但在网络任务中的研究较少。

添加和读取队列:
- 应用将SQE添加到SQ的尾部。内核从队列的头部读取SQE；
- 内核将CQE添加到CQ的尾部。应用从队列的头部读取CQE。

### 使用场景和性能

## 使用

